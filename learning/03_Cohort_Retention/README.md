# 03. Cohort & Retention 분석

## 학습 목표

이 모듈을 완료하면 다음을 할 수 있습니다:

1. **Cohort (코호트)** 개념을 이해하고 SQL로 생성할 수 있다
2. **Retention Matrix** 를 SQL로 계산할 수 있다
3. **Retention Curve** 를 해석하고 인사이트를 도출할 수 있다
4. 코호트별 성과 차이를 분석하고 원인을 추론할 수 있다

---

## 핵심 개념

### Cohort (코호트)란?

> 특정 기간에 **공통된 특성/경험**을 가진 사용자 그룹

**예시:**
- "2024년 1월 가입자" (시간 기반)
- "구글 광고로 유입된 사용자" (채널 기반)
- "첫 구매 금액 5만원 이상 고객" (행동 기반)

### Retention (리텐션)이란?

> 특정 기간 후에도 **서비스를 계속 사용하는** 비율

```
리텐션율 = (N일 후 활성 사용자 / 코호트 전체 사용자) × 100
```

### 왜 중요한가?

1. **시간에 따른 행동 패턴 파악**: 가입 후 어떻게 변하는지
2. **제품/서비스 개선 효과 측정**: 개선 전후 코호트 비교
3. **시즌성 파악**: 특정 시기 가입자의 특성
4. **LTV 예측**: 리텐션이 높으면 LTV도 높음

### Retention Matrix 읽는 법

```
         Month 0  Month 1  Month 2  Month 3
Jan 2024   100%     45%      30%      25%
Feb 2024   100%     50%      35%       -
Mar 2024   100%     48%       -        -
```

- **행**: 코호트 (가입 시점)
- **열**: 가입 후 경과 기간
- **값**: 리텐션율 또는 매출

### 실무 인사이트

- **Month 0 → Month 1 급락**: 온보딩 문제
- **최근 코호트 성과 하락**: 제품/마케팅 문제
- **특정 코호트만 우수**: 해당 시기 캠페인/기능 분석 필요

---

## 실습 순서

1. `exercise.ipynb` 열기
2. 각 미션의 SQL을 직접 작성
3. 막히면 힌트 참고 (가능한 안 보고!)
4. 완료 후 `solution.sql`과 비교
5. 회고: 어떤 점이 어려웠는지 정리

---

## 테이블 구조

```sql
-- 고객 테이블
customers (
    customer_id,          -- 고객 ID
    signup_date,          -- 가입일 (코호트 기준)
    acquisition_channel,  -- 획득 채널
    acquisition_cost,     -- 획득 비용
    is_churned            -- 이탈 여부
)

-- 거래 테이블
transactions (
    transaction_id,    -- 거래 ID
    customer_id,       -- 고객 ID (FK)
    transaction_date,  -- 거래일
    amount,            -- 거래 금액
    product_category   -- 상품 카테고리
)
```

---

## 면접 대비 포인트

**자주 묻는 질문:**
1. "코호트 분석을 어떻게 하셨나요?"
2. "리텐션이 낮은 원인을 어떻게 파악하셨나요?"
3. "코호트별 차이가 있을 때 어떻게 대응하셨나요?"

**좋은 답변 예시:**
> "월별 가입 코호트의 리텐션을 분석했습니다.
>
> 분석 결과, 1월 코호트가 다른 달 대비
> 3개월 리텐션이 20%p 높았습니다.
>
> 원인 분석 결과, 해당 시점에
> 신규 온보딩 플로우를 도입했기 때문이었습니다.
>
> 이를 전체 사용자에게 적용하여
> 평균 리텐션을 15% 개선했습니다."
