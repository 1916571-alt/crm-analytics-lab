# 02. Funnel 분석

## 학습 목표

이 모듈을 완료하면 다음을 할 수 있습니다:

1. **Funnel (퍼널)** 개념을 이해하고 SQL로 구현할 수 있다
2. **단계별 전환율 (Conversion Rate)** 을 계산할 수 있다
3. **병목 지점 (Bottleneck)** 을 식별할 수 있다
4. 채널별, 디바이스별 퍼널 성과를 비교 분석할 수 있다

---

## 핵심 개념

### Funnel (퍼널)이란?

> 사용자가 목표 행동(구매, 가입 등)까지 거치는 **단계적 여정**

**AARRR 프레임워크:**
| 단계 | 의미 | 예시 |
|------|------|------|
| **A**cquisition | 획득 | 웹사이트 방문 |
| **A**ctivation | 활성화 | 회원가입, 첫 행동 |
| **R**etention | 유지 | 재방문, 반복 사용 |
| **R**evenue | 수익 | 구매, 결제 |
| **R**eferral | 추천 | 친구 초대 |

### 전환율 (Conversion Rate)

```
전환율 = 다음 단계 사용자 수 / 현재 단계 사용자 수 × 100
```

### 왜 중요한가?

1. **병목 지점 발견**: 어디서 사용자가 이탈하는지 파악
2. **개선 우선순위 결정**: 전환율이 낮은 단계에 집중
3. **A/B 테스트 기획**: 병목 지점 개선 실험 설계
4. **ROI 예측**: 전환율 개선 시 매출 증가 예측

### 실무에서의 퍼널 예시

**이커머스:**
```
페이지 방문 → 상품 조회 → 장바구니 추가 → 결제 시작 → 결제 완료
   100%    →    60%     →     25%      →    15%     →     8%
```

**SaaS:**
```
랜딩 방문 → 회원가입 → 무료체험 → 유료 전환
   100%   →    30%   →    15%   →     5%
```

---

## 실습 순서

1. `exercise.ipynb` 열기
2. 각 미션의 SQL을 직접 작성
3. 막히면 힌트 참고 (가능한 안 보고!)
4. 완료 후 `solution.sql`과 비교
5. 회고: 어떤 점이 어려웠는지 정리

---

## 테이블 구조

```sql
-- 이벤트 로그 테이블
events (
    event_id,        -- 이벤트 ID
    user_id,         -- 사용자 ID
    session_id,      -- 세션 ID
    event_type,      -- 이벤트 유형 (page_view, product_view, add_to_cart, checkout_start, purchase)
    event_date,      -- 이벤트 날짜
    event_timestamp, -- 이벤트 시간
    page_url,        -- 페이지 URL
    device,          -- 디바이스 (mobile, desktop, tablet)
    channel          -- 유입 채널
)
```

**이벤트 유형:**
| event_type | 설명 | 퍼널 순서 |
|------------|------|-----------|
| page_view | 페이지 조회 | 1 |
| product_view | 상품 조회 | 2 |
| add_to_cart | 장바구니 추가 | 3 |
| checkout_start | 결제 시작 | 4 |
| purchase | 구매 완료 | 5 |

---

## 면접 대비 포인트

**자주 묻는 질문:**
1. "퍼널 분석을 어떻게 하셨나요?"
2. "병목 지점을 어떻게 찾으셨나요?"
3. "전환율을 어떻게 개선하셨나요?"

**좋은 답변 예시:**
> "이커머스 퍼널을 분석한 결과,
> '장바구니 추가 → 결제 시작' 단계에서 전환율이 40%로 가장 낮았습니다.
>
> 원인 분석 결과, 모바일에서 결제 버튼이 눈에 잘 띄지 않았고,
> 게스트 결제 옵션이 없어서 이탈이 많았습니다.
>
> UI 개선과 게스트 결제 도입 후,
> 해당 단계 전환율이 40% → 55%로 개선되었고,
> 이는 전체 매출 15% 증가로 이어졌습니다."
